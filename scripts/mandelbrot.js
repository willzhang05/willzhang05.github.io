function colorGen(){return Math.floor(255*Math.random())}function mandelbrot(){for(var a=4/w,t=4/h,n=0;h>n;n++)for(var o=xp*a+(2-w*a),e=n*t+(2-h*t),c=z1=z2=0,l=0;100>l;l++)if(c=z1,z1=Math.pow(z1,2)-Math.pow(z2,2)+o,z2=2*c*z2+e,Math.sqrt(Math.pow(z1,2)+Math.pow(z2,2))>=2){data[l]=r,data[++l]=g,data[++l]=b,data[++l]=255,ctx.putImageData(imgData,xp,n);break}}function update(){xp++,mandelbrot(),xp>=w&&stopInterval()}function resetGen(){xp=0,r=colorGen(),g=colorGen(),b=colorGen(),stopInterval(),interval()}function interval(){stopInterval(),sI=setInterval(update,50)}function stopInterval(){clearInterval(sI)}var canvas=document.getElementById("mandelbrot"),ctx=canvas.getContext("2d"),w=canvas.width,h=canvas.height,xp=0,sI,imgData=ctx.getImageData(0,0,w,h),data=imgData.data;var r=colorGen(),g=colorGen(),b=colorGen();
